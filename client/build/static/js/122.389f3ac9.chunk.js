"use strict";(self.webpackChunklearnsphere_client=self.webpackChunklearnsphere_client||[]).push([[122],{33122:(e,s,n)=>{n.r(s),n.d(s,{default:()=>q});var r=n(65043),a=n(96446),l=n(19252),i=n(85865),t=n(68903),o=n(63336),d=n(81045),c=n(39336),x=n(54669),h=n(24056),u=n(14194),m=n(67784),A=n(11906),j=n(81637),v=n(12110),y=n(26494),b=n(53193),p=n(79190),g=n(69285),f=n(32143),w=n(68577),P=n(17843),C=n(59893),S=n(71007),k=n(32069),L=n(37141),B=n(30697),W=n(97077),N=n(70579);function D(e){const{children:s,value:n,index:r,...l}=e;return(0,N.jsx)("div",{role:"tabpanel",hidden:n!==r,id:`profile-tabpanel-${r}`,"aria-labelledby":`profile-tab-${r}`,...l,children:n===r&&(0,N.jsx)(a.A,{sx:{p:3},children:s})})}const q=()=>{var e;const{user:s,updateProfile:n,changePassword:q,loading:I}=(0,r.useContext)(B.A),{userLevel:U,updateUserLevel:z}=(0,r.useContext)(W.A),[M,E]=(0,r.useState)(0),[H,F]=(0,r.useState)({name:"",email:"",bio:""}),[$,_]=(0,r.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[T,Y]=(0,r.useState)({level:U||"intermediate",emailNotifications:!0,saveHistory:!0,darkMode:!1}),[G,J]=(0,r.useState)(!1),[K,O]=(0,r.useState)(null),[Q,R]=(0,r.useState)(null);(0,r.useEffect)((()=>{s&&(F({name:s.name||"",email:s.email||"",bio:s.bio||""}),s.preferences&&Y((e=>({...e,...s.preferences}))))}),[s]);const V=e=>{const{name:s,value:n}=e.target;F({...H,[s]:n})},X=e=>{const{name:s,value:n}=e.target;_({...$,[s]:n})},Z=e=>{const{name:s,value:n,checked:r}=e.target,a="checkbox"===e.target.type?r:n;Y({...T,[s]:a}),"level"===s&&n!==U&&z(n)},ee=async e=>{e.preventDefault(),O(null),R(null),J(!0);try{await n({...H,preferences:T})&&R("Profile updated successfully")}catch(s){O("Failed to update profile")}finally{J(!1)}};return(0,N.jsxs)(l.A,{maxWidth:"lg",sx:{mt:4,mb:4},children:[(0,N.jsx)(i.A,{variant:"h4",component:"h1",gutterBottom:!0,children:"Your Profile"}),(0,N.jsxs)(t.Ay,{container:!0,spacing:3,children:[(0,N.jsx)(t.Ay,{item:!0,xs:12,md:4,children:(0,N.jsxs)(o.A,{sx:{p:3,textAlign:"center"},children:[(0,N.jsx)(d.A,{sx:{width:100,height:100,mx:"auto",mb:2,bgcolor:"primary.main",fontSize:40},children:(null===s||void 0===s||null===(e=s.name)||void 0===e?void 0:e.charAt(0))||"U"}),(0,N.jsx)(i.A,{variant:"h5",gutterBottom:!0,children:(null===s||void 0===s?void 0:s.name)||"User"}),(0,N.jsx)(i.A,{variant:"body2",color:"text.secondary",paragraph:!0,children:(null===s||void 0===s?void 0:s.email)||"user@example.com"}),(0,N.jsx)(c.A,{sx:{my:2}}),(0,N.jsxs)(a.A,{sx:{textAlign:"left"},children:[(0,N.jsx)(i.A,{variant:"subtitle1",gutterBottom:!0,children:"Learning Level"}),(0,N.jsx)(i.A,{variant:"body2",color:"text.secondary",paragraph:!0,children:T.level.charAt(0).toUpperCase()+T.level.slice(1)}),(0,N.jsx)(i.A,{variant:"subtitle1",gutterBottom:!0,children:"Member Since"}),(0,N.jsx)(i.A,{variant:"body2",color:"text.secondary",children:null!==s&&void 0!==s&&s.createdAt?new Date(s.createdAt).toLocaleDateString():"Unknown"})]})]})}),(0,N.jsx)(t.Ay,{item:!0,xs:12,md:8,children:(0,N.jsxs)(o.A,{sx:{width:"100%"},children:[(0,N.jsxs)(x.A,{value:M,onChange:(e,s)=>{E(s)},indicatorColor:"primary",textColor:"primary",variant:"fullWidth",children:[(0,N.jsx)(h.A,{icon:(0,N.jsx)(C.A,{}),label:"Profile"}),(0,N.jsx)(h.A,{icon:(0,N.jsx)(S.A,{}),label:"Security"}),(0,N.jsx)(h.A,{icon:(0,N.jsx)(k.A,{}),label:"Preferences"})]}),(0,N.jsxs)(D,{value:M,index:0,children:[K&&(0,N.jsx)(u.A,{severity:"error",sx:{mb:2},children:K}),Q&&(0,N.jsx)(u.A,{severity:"success",sx:{mb:2},children:Q}),(0,N.jsx)(a.A,{component:"form",onSubmit:ee,children:(0,N.jsxs)(t.Ay,{container:!0,spacing:3,children:[(0,N.jsx)(t.Ay,{item:!0,xs:12,children:(0,N.jsx)(m.A,{fullWidth:!0,label:"Name",name:"name",value:H.name,onChange:V,required:!0})}),(0,N.jsx)(t.Ay,{item:!0,xs:12,children:(0,N.jsx)(m.A,{fullWidth:!0,label:"Email",name:"email",type:"email",value:H.email,onChange:V,required:!0,disabled:!0})}),(0,N.jsx)(t.Ay,{item:!0,xs:12,children:(0,N.jsx)(m.A,{fullWidth:!0,label:"Bio",name:"bio",value:H.bio,onChange:V,multiline:!0,rows:4,placeholder:"Tell us a bit about yourself and your learning goals..."})}),(0,N.jsx)(t.Ay,{item:!0,xs:12,children:(0,N.jsx)(A.A,{type:"submit",variant:"contained",color:"primary",startIcon:(0,N.jsx)(L.A,{}),disabled:G||I,children:G||I?(0,N.jsx)(j.A,{size:24}):"Save Changes"})})]})})]}),(0,N.jsxs)(D,{value:M,index:1,children:[K&&(0,N.jsx)(u.A,{severity:"error",sx:{mb:2},children:K}),Q&&(0,N.jsx)(u.A,{severity:"success",sx:{mb:2},children:Q}),(0,N.jsx)(a.A,{component:"form",onSubmit:async e=>{if(e.preventDefault(),O(null),R(null),$.newPassword===$.confirmPassword)if($.newPassword.length<6)O("Password must be at least 6 characters long");else{J(!0);try{await q($.currentPassword,$.newPassword)&&(R("Password changed successfully"),_({currentPassword:"",newPassword:"",confirmPassword:""}))}catch(s){O("Failed to change password")}finally{J(!1)}}else O("New passwords do not match")},children:(0,N.jsxs)(t.Ay,{container:!0,spacing:3,children:[(0,N.jsx)(t.Ay,{item:!0,xs:12,children:(0,N.jsx)(m.A,{fullWidth:!0,label:"Current Password",name:"currentPassword",type:"password",value:$.currentPassword,onChange:X,required:!0})}),(0,N.jsx)(t.Ay,{item:!0,xs:12,children:(0,N.jsx)(m.A,{fullWidth:!0,label:"New Password",name:"newPassword",type:"password",value:$.newPassword,onChange:X,required:!0})}),(0,N.jsx)(t.Ay,{item:!0,xs:12,children:(0,N.jsx)(m.A,{fullWidth:!0,label:"Confirm New Password",name:"confirmPassword",type:"password",value:$.confirmPassword,onChange:X,required:!0})}),(0,N.jsx)(t.Ay,{item:!0,xs:12,children:(0,N.jsx)(A.A,{type:"submit",variant:"contained",color:"primary",startIcon:(0,N.jsx)(S.A,{}),disabled:G||I,children:G||I?(0,N.jsx)(j.A,{size:24}):"Change Password"})})]})})]}),(0,N.jsx)(D,{value:M,index:2,children:(0,N.jsxs)(t.Ay,{container:!0,spacing:3,children:[(0,N.jsx)(t.Ay,{item:!0,xs:12,children:(0,N.jsx)(v.A,{children:(0,N.jsxs)(y.A,{children:[(0,N.jsx)(i.A,{variant:"h6",gutterBottom:!0,children:"Learning Preferences"}),(0,N.jsxs)(b.A,{fullWidth:!0,sx:{mb:2},children:[(0,N.jsx)(p.A,{id:"level-label",children:"Learning Level"}),(0,N.jsxs)(g.A,{labelId:"level-label",name:"level",value:T.level,onChange:Z,label:"Learning Level",children:[(0,N.jsx)(f.A,{value:"beginner",children:"Beginner"}),(0,N.jsx)(f.A,{value:"intermediate",children:"Intermediate"}),(0,N.jsx)(f.A,{value:"advanced",children:"Advanced"})]})]}),(0,N.jsx)(w.A,{control:(0,N.jsx)(P.A,{checked:T.saveHistory,onChange:Z,name:"saveHistory"}),label:"Save learning history"})]})})}),(0,N.jsx)(t.Ay,{item:!0,xs:12,children:(0,N.jsx)(v.A,{children:(0,N.jsxs)(y.A,{children:[(0,N.jsx)(i.A,{variant:"h6",gutterBottom:!0,children:"Notification Settings"}),(0,N.jsx)(w.A,{control:(0,N.jsx)(P.A,{checked:T.emailNotifications,onChange:Z,name:"emailNotifications"}),label:"Email notifications"})]})})}),(0,N.jsx)(t.Ay,{item:!0,xs:12,children:(0,N.jsx)(v.A,{children:(0,N.jsxs)(y.A,{children:[(0,N.jsx)(i.A,{variant:"h6",gutterBottom:!0,children:"Display Settings"}),(0,N.jsx)(w.A,{control:(0,N.jsx)(P.A,{checked:T.darkMode,onChange:Z,name:"darkMode"}),label:"Dark mode"})]})})}),(0,N.jsx)(t.Ay,{item:!0,xs:12,children:(0,N.jsx)(A.A,{variant:"contained",color:"primary",startIcon:(0,N.jsx)(L.A,{}),onClick:ee,disabled:G||I,children:G||I?(0,N.jsx)(j.A,{size:24}):"Save Preferences"})})]})})]})})]})]})}}}]);
//# sourceMappingURL=122.389f3ac9.chunk.js.map