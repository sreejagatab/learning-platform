"use strict";(self.webpackChunklearnsphere_client=self.webpackChunklearnsphere_client||[]).push([[604],{23604:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Ae});var o=a(65043),n=a(35475),r=a(19252),i=a(85865),s=a(63336),l=a(96446),c=a(67784),d=a(98587),p=a(58168),u=a(58387),h=a(98610),m=a(6803),v=a(41053),g=a(85213),x=a(34535),y=a(92532),b=a(72372);function A(e){return(0,b.Ay)("MuiInputAdornment",e)}const f=(0,y.A)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var j,C=a(98206),$=a(70579);const w=["children","className","component","disablePointerEvents","disableTypography","position","variant"],S=(0,x.Ay)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[`position${(0,m.A)(a.position)}`],!0===a.disablePointerEvents&&t.disablePointerEvents,t[a.variant]]}})((e=>{let{theme:t,ownerState:a}=e;return(0,p.A)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active},"filled"===a.variant&&{[`&.${f.positionStart}&:not(.${f.hiddenLabel})`]:{marginTop:16}},"start"===a.position&&{marginRight:8},"end"===a.position&&{marginLeft:8},!0===a.disablePointerEvents&&{pointerEvents:"none"})})),z=o.forwardRef((function(e,t){const a=(0,C.b)({props:e,name:"MuiInputAdornment"}),{children:n,className:r,component:s="div",disablePointerEvents:l=!1,disableTypography:c=!1,position:x,variant:y}=a,b=(0,d.A)(a,w),f=(0,g.A)()||{};let z=y;y&&f.variant,f&&!z&&(z=f.variant);const P=(0,p.A)({},a,{hiddenLabel:f.hiddenLabel,size:f.size,disablePointerEvents:l,position:x,variant:z}),L=(e=>{const{classes:t,disablePointerEvents:a,hiddenLabel:o,position:n,size:r,variant:i}=e,s={root:["root",a&&"disablePointerEvents",n&&`position${(0,m.A)(n)}`,i,o&&"hiddenLabel",r&&`size${(0,m.A)(r)}`]};return(0,h.A)(s,A,t)})(P);return(0,$.jsx)(v.A.Provider,{value:null,children:(0,$.jsx)(S,(0,p.A)({as:s,ownerState:P,className:(0,u.A)(L.root,r),ref:t},b,{children:"string"!==typeof n||c?(0,$.jsxs)(o.Fragment,{children:["start"===x?j||(j=(0,$.jsx)("span",{className:"notranslate",children:"\u200b"})):null,n]}):(0,$.jsx)(i.A,{color:"text.secondary",children:n})}))})}));var P=a(11906),L=a(81637),N=a(35721),R=a(90889),k=a(86605),B=a(30681),M=a(2050),I=a(48734),O=a(40710),q=a(68903),F=a(12110),E=a(26494),T=a(43845),W=a(39336);function U(e){return(0,b.Ay)("MuiPagination",e)}(0,y.A)("MuiPagination",["root","ul","outlined","text"]);var _=a(51052);const X=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];var H=a(67266),V=a(10875);function D(e){return(0,b.Ay)("MuiPaginationItem",e)}const Q=(0,y.A)("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon","colorPrimary","colorSecondary"]);var G=a(66236),Y=a(66734);const J=(0,Y.A)((0,$.jsx)("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),K=(0,Y.A)((0,$.jsx)("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),Z=(0,Y.A)((0,$.jsx)("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),ee=(0,Y.A)((0,$.jsx)("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),te=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],ae=(e,t)=>{const{ownerState:a}=e;return[t.root,t[a.variant],t[`size${(0,m.A)(a.size)}`],"text"===a.variant&&t[`text${(0,m.A)(a.color)}`],"outlined"===a.variant&&t[`outlined${(0,m.A)(a.color)}`],"rounded"===a.shape&&t.rounded,"page"===a.type&&t.page,("start-ellipsis"===a.type||"end-ellipsis"===a.type)&&t.ellipsis,("previous"===a.type||"next"===a.type)&&t.previousNext,("first"===a.type||"last"===a.type)&&t.firstLast]},oe=(0,x.Ay)("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:ae})((e=>{let{theme:t,ownerState:a}=e;return(0,p.A)({},t.typography.body2,{borderRadius:16,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(t.vars||t).palette.text.primary,height:"auto",[`&.${Q.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},"small"===a.size&&{minWidth:26,borderRadius:13,margin:"0 1px",padding:"0 4px"},"large"===a.size&&{minWidth:40,borderRadius:20,padding:"0 10px",fontSize:t.typography.pxToRem(15)})})),ne=(0,x.Ay)(G.A,{name:"MuiPaginationItem",slot:"Root",overridesResolver:ae})((e=>{let{theme:t,ownerState:a}=e;return(0,p.A)({},t.typography.body2,{borderRadius:16,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(t.vars||t).palette.text.primary,[`&.${Q.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${Q.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},transition:t.transitions.create(["color","background-color"],{duration:t.transitions.duration.short}),"&:hover":{backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Q.selected}`]:{backgroundColor:(t.vars||t).palette.action.selected,"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:(0,H.X4)(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(t.vars||t).palette.action.selected}},[`&.${Q.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:(0,H.X4)(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},[`&.${Q.disabled}`]:{opacity:1,color:(t.vars||t).palette.action.disabled,backgroundColor:(t.vars||t).palette.action.selected}}},"small"===a.size&&{minWidth:26,height:26,borderRadius:13,margin:"0 1px",padding:"0 4px"},"large"===a.size&&{minWidth:40,height:40,borderRadius:20,padding:"0 10px",fontSize:t.typography.pxToRem(15)},"rounded"===a.shape&&{borderRadius:(t.vars||t).shape.borderRadius})}),(e=>{let{theme:t,ownerState:a}=e;return(0,p.A)({},"text"===a.variant&&{[`&.${Q.selected}`]:(0,p.A)({},"standard"!==a.color&&{color:(t.vars||t).palette[a.color].contrastText,backgroundColor:(t.vars||t).palette[a.color].main,"&:hover":{backgroundColor:(t.vars||t).palette[a.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[a.color].main}},[`&.${Q.focusVisible}`]:{backgroundColor:(t.vars||t).palette[a.color].dark}},{[`&.${Q.disabled}`]:{color:(t.vars||t).palette.action.disabled}})},"outlined"===a.variant&&{border:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:"1px solid "+("light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"),[`&.${Q.selected}`]:(0,p.A)({},"standard"!==a.color&&{color:(t.vars||t).palette[a.color].main,border:`1px solid ${t.vars?`rgba(${t.vars.palette[a.color].mainChannel} / 0.5)`:(0,H.X4)(t.palette[a.color].main,.5)}`,backgroundColor:t.vars?`rgba(${t.vars.palette[a.color].mainChannel} / ${t.vars.palette.action.activatedOpacity})`:(0,H.X4)(t.palette[a.color].main,t.palette.action.activatedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[a.color].mainChannel} / calc(${t.vars.palette.action.activatedOpacity} + ${t.vars.palette.action.focusOpacity}))`:(0,H.X4)(t.palette[a.color].main,t.palette.action.activatedOpacity+t.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Q.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[a.color].mainChannel} / calc(${t.vars.palette.action.activatedOpacity} + ${t.vars.palette.action.focusOpacity}))`:(0,H.X4)(t.palette[a.color].main,t.palette.action.activatedOpacity+t.palette.action.focusOpacity)}},{[`&.${Q.disabled}`]:{borderColor:(t.vars||t).palette.action.disabledBackground,color:(t.vars||t).palette.action.disabled}})})})),re=(0,x.Ay)("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(e,t)=>t.icon})((e=>{let{theme:t,ownerState:a}=e;return(0,p.A)({fontSize:t.typography.pxToRem(20),margin:"0 -8px"},"small"===a.size&&{fontSize:t.typography.pxToRem(18)},"large"===a.size&&{fontSize:t.typography.pxToRem(22)})})),ie=o.forwardRef((function(e,t){const a=(0,C.b)({props:e,name:"MuiPaginationItem"}),{className:o,color:n="standard",component:r,components:i={},disabled:s=!1,page:l,selected:c=!1,shape:v="circular",size:g="medium",slots:x={},type:y="page",variant:b="text"}=a,A=(0,d.A)(a,te),f=(0,p.A)({},a,{color:n,disabled:s,selected:c,shape:v,size:g,type:y,variant:b}),j=(0,V.I)(),w=(e=>{const{classes:t,color:a,disabled:o,selected:n,size:r,shape:i,type:s,variant:l}=e,c={root:["root",`size${(0,m.A)(r)}`,l,i,"standard"!==a&&`color${(0,m.A)(a)}`,"standard"!==a&&`${l}${(0,m.A)(a)}`,o&&"disabled",n&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[s]],icon:["icon"]};return(0,h.A)(c,D,t)})(f),S=(j?{previous:x.next||i.next||ee,next:x.previous||i.previous||Z,last:x.first||i.first||J,first:x.last||i.last||K}:{previous:x.previous||i.previous||Z,next:x.next||i.next||ee,first:x.first||i.first||J,last:x.last||i.last||K})[y];return"start-ellipsis"===y||"end-ellipsis"===y?(0,$.jsx)(oe,{ref:t,ownerState:f,className:(0,u.A)(w.root,o),children:"\u2026"}):(0,$.jsxs)(ne,(0,p.A)({ref:t,ownerState:f,component:r,disabled:s,className:(0,u.A)(w.root,o)},A,{children:["page"===y&&l,S?(0,$.jsx)(re,{as:S,ownerState:f,className:w.icon}):null]}))})),se=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],le=(0,x.Ay)("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[a.variant]]}})({}),ce=(0,x.Ay)("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(e,t)=>t.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function de(e,t,a){return"page"===e?`${a?"":"Go to "}page ${t}`:`Go to ${e} page`}const pe=o.forwardRef((function(e,t){const a=(0,C.b)({props:e,name:"MuiPagination"}),{boundaryCount:o=1,className:n,color:r="standard",count:i=1,defaultPage:s=1,disabled:l=!1,getItemAriaLabel:c=de,hideNextButton:m=!1,hidePrevButton:v=!1,renderItem:g=e=>(0,$.jsx)(ie,(0,p.A)({},e)),shape:x="circular",showFirstButton:y=!1,showLastButton:b=!1,siblingCount:A=1,size:f="medium",variant:j="text"}=a,w=(0,d.A)(a,se),{items:S}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{boundaryCount:t=1,componentName:a="usePagination",count:o=1,defaultPage:n=1,disabled:r=!1,hideNextButton:i=!1,hidePrevButton:s=!1,onChange:l,page:c,showFirstButton:u=!1,showLastButton:h=!1,siblingCount:m=1}=e,v=(0,d.A)(e,X),[g,x]=(0,_.A)({controlled:c,default:n,name:a,state:"page"}),y=(e,t)=>{c||x(t),l&&l(e,t)},b=(e,t)=>{const a=t-e+1;return Array.from({length:a},((t,a)=>e+a))},A=b(1,Math.min(t,o)),f=b(Math.max(o-t+1,t+1),o),j=Math.max(Math.min(g-m,o-t-2*m-1),t+2),C=Math.min(Math.max(g+m,t+2*m+2),f.length>0?f[0]-2:o-1),$=[...u?["first"]:[],...s?[]:["previous"],...A,...j>t+2?["start-ellipsis"]:t+1<o-t?[t+1]:[],...b(j,C),...C<o-t-1?["end-ellipsis"]:o-t>t?[o-t]:[],...f,...i?[]:["next"],...h?["last"]:[]],w=e=>{switch(e){case"first":return 1;case"previous":return g-1;case"next":return g+1;case"last":return o;default:return null}},S=$.map((e=>"number"===typeof e?{onClick:t=>{y(t,e)},type:"page",page:e,selected:e===g,disabled:r,"aria-current":e===g?"true":void 0}:{onClick:t=>{y(t,w(e))},type:e,page:w(e),selected:!1,disabled:r||-1===e.indexOf("ellipsis")&&("next"===e||"last"===e?g>=o:g<=1)}));return(0,p.A)({items:S},v)}((0,p.A)({},a,{componentName:"Pagination"})),z=(0,p.A)({},a,{boundaryCount:o,color:r,count:i,defaultPage:s,disabled:l,getItemAriaLabel:c,hideNextButton:m,hidePrevButton:v,renderItem:g,shape:x,showFirstButton:y,showLastButton:b,siblingCount:A,size:f,variant:j}),P=(e=>{const{classes:t,variant:a}=e,o={root:["root",a],ul:["ul"]};return(0,h.A)(o,U,t)})(z);return(0,$.jsx)(le,(0,p.A)({"aria-label":"pagination navigation",className:(0,u.A)(P.root,n),ownerState:z,ref:t},w,{children:(0,$.jsx)(ce,{className:P.ul,ownerState:z,children:S.map(((e,t)=>(0,$.jsx)("li",{children:g((0,p.A)({},e,{color:r,"aria-label":c(e.type,e.page,e.selected),shape:x,size:f,variant:j}))},t)))})}))})),ue=(0,Y.A)((0,$.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search");var he=a(68746),me=a(33861),ve=a(58293),ge=a(42137);const xe=(0,Y.A)((0,$.jsx)("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}),"ArrowForward");var ye=a(47503),be=a(97077);const Ae=()=>{const{getLearningHistory:e,saveContent:t,historyLoading:a}=(0,o.useContext)(be.A),[d,p]=(0,o.useState)([]),[u,h]=(0,o.useState)(!1),[m,v]=(0,o.useState)(""),[g,x]=(0,o.useState)(1),[y,b]=(0,o.useState)(1),[A,f]=(0,o.useState)(null);(0,o.useEffect)((()=>{(async()=>{h(!0);try{var t;const a=await e(g,10,m);p(a.history||[]),b((null===(t=a.pagination)||void 0===t?void 0:t.pages)||1)}catch(a){console.error("Error fetching history:",a),ye.oR.error("Failed to load learning history")}finally{h(!1)}})()}),[e,g,m]);const j=e=>{const t=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"}).format(t)};return(0,$.jsxs)(r.A,{maxWidth:"lg",sx:{mt:4,mb:4},children:[(0,$.jsx)(i.A,{variant:"h4",component:"h1",gutterBottom:!0,children:"Learning History"}),(0,$.jsx)(i.A,{variant:"body1",paragraph:!0,children:"Review your past learning sessions and questions"}),(0,$.jsx)(s.A,{sx:{p:2,mb:3},children:(0,$.jsxs)(l.A,{component:"form",onSubmit:e=>{e.preventDefault(),x(1)},sx:{display:"flex",gap:2},children:[(0,$.jsx)(c.A,{fullWidth:!0,placeholder:"Search your learning history...",value:m,onChange:e=>v(e.target.value),InputProps:{startAdornment:(0,$.jsx)(z,{position:"start",children:(0,$.jsx)(ue,{})})}}),(0,$.jsx)(P.A,{type:"submit",variant:"contained",disabled:u,children:"Search"})]})}),u||a?(0,$.jsx)(l.A,{sx:{display:"flex",justifyContent:"center",py:4},children:(0,$.jsx)(L.A,{})}):0===d.length?(0,$.jsxs)(s.A,{sx:{p:4,textAlign:"center"},children:[(0,$.jsx)(he.A,{sx:{fontSize:60,color:"text.secondary",mb:2}}),(0,$.jsx)(i.A,{variant:"h6",gutterBottom:!0,children:"No learning history found"}),(0,$.jsx)(i.A,{variant:"body1",color:"text.secondary",paragraph:!0,children:m?`No results found for "${m}"`:"You haven't asked any questions yet"}),(0,$.jsx)(P.A,{variant:"contained",component:n.N_,to:"/learn",startIcon:(0,$.jsx)(me.A,{}),children:"Start Learning"})]}):(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(N.A,{component:s.A,children:d.map((e=>(0,$.jsxs)(o.Fragment,{children:[(0,$.jsxs)(R.A,{expanded:A===e._id,onChange:()=>{return t=e._id,void f(A===t?null:t);var t},children:[(0,$.jsx)(k.A,{expandIcon:(0,$.jsx)(ve.A,{}),children:(0,$.jsxs)(B.Ay,{disablePadding:!0,children:[(0,$.jsx)(M.A,{children:(0,$.jsx)(me.A,{color:"primary"})}),(0,$.jsx)(I.A,{primary:e.query,secondary:j(e.queryTimestamp)})]})}),(0,$.jsx)(O.A,{children:(0,$.jsxs)(l.A,{sx:{pl:7,pr:2},children:[(0,$.jsx)(i.A,{variant:"body1",paragraph:!0,children:e.response}),e.followUps&&e.followUps.length>0&&(0,$.jsxs)(l.A,{sx:{mt:2},children:[(0,$.jsx)(i.A,{variant:"subtitle1",gutterBottom:!0,children:"Follow-up Questions:"}),(0,$.jsx)(q.Ay,{container:!0,spacing:1,children:e.followUps.map(((e,t)=>(0,$.jsx)(q.Ay,{item:!0,xs:12,children:(0,$.jsx)(F.A,{variant:"outlined",children:(0,$.jsxs)(E.A,{children:[(0,$.jsx)(i.A,{variant:"subtitle2",gutterBottom:!0,children:e.query}),(0,$.jsx)(i.A,{variant:"body2",color:"text.secondary",children:e.response.length>200?`${e.response.substring(0,200)}...`:e.response})]})})},t)))})]}),e.citations&&e.citations.length>0&&(0,$.jsxs)(l.A,{sx:{mt:2},children:[(0,$.jsx)(i.A,{variant:"subtitle1",gutterBottom:!0,children:"Sources:"}),(0,$.jsx)(l.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:e.citations.map(((e,t)=>(0,$.jsx)(T.A,{label:e.title||"Source",component:"a",href:e.url,target:"_blank",rel:"noopener noreferrer",clickable:!0,variant:"outlined"},t)))})]}),(0,$.jsxs)(l.A,{sx:{display:"flex",justifyContent:"flex-end",mt:2},children:[(0,$.jsx)(P.A,{startIcon:(0,$.jsx)(ge.A,{}),onClick:()=>(async e=>{try{const a=e.query.length>50?`${e.query.substring(0,50)}...`:e.query,o=`# ${e.query}\n\n${e.response}\n\n## Follow-up Questions\n${e.followUps&&e.followUps.length>0?e.followUps.map((e=>`- ${e.query}\n  ${e.response}`)).join("\n\n"):"No follow-up questions"}`,n={originalQuery:e.query,queryTimestamp:e.queryTimestamp,citations:e.citations||[]};await t(a,o,"note",n),ye.oR.success("Saved to your notes")}catch(a){console.error("Error saving to notes:",a),ye.oR.error("Failed to save to notes")}})(e),sx:{mr:1},children:"Save to Notes"}),(0,$.jsx)(P.A,{startIcon:(0,$.jsx)(xe,{}),component:n.N_,to:`/learn?q=${encodeURIComponent(e.query)}`,children:"Continue Learning"})]})]})})]}),(0,$.jsx)(W.A,{})]},e._id)))}),y>1&&(0,$.jsx)(l.A,{sx:{display:"flex",justifyContent:"center",mt:3},children:(0,$.jsx)(pe,{count:y,page:g,onChange:(e,t)=>{x(t)},color:"primary"})})]})]})}}}]);
//# sourceMappingURL=604.75a97719.chunk.js.map